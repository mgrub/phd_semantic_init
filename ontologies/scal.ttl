@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ssn: <http://www.w3.org/ns/ssn/> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix om: <http://www.ontology-of-units-of-measure.org/resource/om-2/>.
@prefix geo: <http://www.opengis.net/ont/geosparql#> .

@prefix scal: <http://www.example.com/ns/scal/> .

dcterms:title a owl:AnnotationProperty .
dcterms:description a owl:AnnotationProperty .
dcterms:created a owl:AnnotationProperty .
dcterms:creator a owl:AnnotationProperty .
rdfs:label a owl:AnnotationProperty .
rdfs:comment a owl:AnnotationProperty .

scal: a owl:Ontology ;
  dcterms:title "Sensor Calibration Ontology"@en ;
  dcterms:description "This ontology is an extension of the SOSA ontology to enable metrological use cases"@en ;
  dcterms:creator "Maximilian Gruber" ;
  dcterms:created "2022-04-01"^^xsd:date .

#################################################################
#    Classes
#################################################################

scal:CalibratedSensor a rdfs:Class , owl:Class ;
  rdfs:label "Calibrated Sensor"@en ;
  rdfs:subClassOf sosa:Sensor ;
  rdfs:subClassOf [ a owl:Restriction ; owl:onProperty ssn:hasProperty ; owl:minCardinality "1"^^xsd:nonNegativeInteger ; owl:onClass scal:CalibrationModel ] ;
  rdfs:isDefinedBy scal: . 

scal:CalibrationModel a rdfs:Class , owl:Class ;
  rdfs:label "Mathematical Calibration Model"@en ;
  rdfs:isDefinedBy scal: . 
  
scal:Location a rdfs:Class , owl:Class ;
  rdfs:label "Location of a Sensor"@en ;
  rdfs:subClassOf sosa:Platform ;
  rdfs:subClassOf geo:SpatialThing ;
  rdfs:isDefinedBy scal: . 
  
scal:MeasureWithUncertainty a rdfs:Class , owl:Class ;
  rdfs:label "Measure with Uncertainty"@en ;
  rdfs:comment "Extended om:Measure with uncertainty quantification as in Digital-SI"@en ;
  rdfs:subClassOf sosa:Result ;
  rdfs:subClassOf om:Measure ;
  rdfs:subClassOf [ a owl:Restriction ; owl:onProperty scal:hasUncertainty ; owl:minCardinality "1"^^xsd:nonNegativeInteger ] ;
  rdfs:isDefinedBy scal: . 

scal:EquationModel a rdfs:Class , owl:Class ;
  rdfs:label "Equation Model"@en ;
  rdfs:comment "Define a model via an equation with parameters and variables."@en ;
  rdfs:subClassOf scal:CalibrationModel ;
  rdfs:subClassOf [ a owl:Restriction ; owl:onProperty scal:hasParameter ; owl:minCardinality "0"^^xsd:nonNegativeInteger ] ;
  rdfs:subClassOf [ a owl:Restriction ; owl:onProperty scal:hasVariable ; owl:minCardinality "1"^^xsd:nonNegativeInteger ] ;
  rdfs:subClassOf [ a owl:Restriction ; owl:onProperty scal:hasEquation ; owl:minCardinality "1"^^xsd:nonNegativeInteger ] ;
  rdfs:isDefinedBy scal: . 

scal:Equation a rdfs:Class , owl:Class ;
  rdfs:label "Equation"@en ;
  rdfs:comment "Define an equation by some representation."@en ;
  rdfs:isDefinedBy scal: . 

scal:Parameter a rdfs:Class , owl:Class ;
  rdfs:label "Parameter"@en ;
  rdfs:comment "Define a parameter."@en ;
  rdfs:subClassOf om:Measure ;  # this includes (by definition) dsi:MeasureWithUncertainty ;
  rdfs:isDefinedBy scal: . 

scal:Variable a rdfs:Class , owl:Class ;
  rdfs:label "Variable"@en ;
  rdfs:comment "Define a variable."@en ;
  rdfs:subClassOf om:Quantity ;
  rdfs:isDefinedBy scal: . 


#################################################################
#    Properties
#################################################################

scal:hasCalibrationModel a owl:ObjectProperty ;
  rdfs:label "has model"@en ;
  rdfs:comment "Relation between a CalibratedSensor and the CalibrationModel used to mathematically describe it."@en ;
  rdfs:subPropertyOf ssn:hasProperty ;
  schema:domainIncludes scal:CalibratedSensor ;
  schema:rangeIncludes scal:CalibrationModel ;
  rdfs:isDefinedBy scal: .
    
scal:hasEquationModel a owl:ObjectProperty ;
  rdfs:label "has equation model"@en ;
  rdfs:isDefinedBy scal: .

scal:hasParameter a owl:ObjectProperty ;
  rdfs:label "has parameter"@en ;
  rdfs:comment "Relation between an EquationModel and the Parameter(s) used in the mathematical expression."@en ;
  schema:domainIncludes scal:EquationModel ;
  schema:rangeIncludes scal:Parameter ;
  schema:rangeIncludes scal:MeasureWithUncertainty ;
  schema:rangeIncludes om:Measure ;
  rdfs:isDefinedBy scal: .
  
scal:hasVariable a owl:ObjectProperty ;
  rdfs:label "has variable"@en ;
  rdfs:comment "Relation between an EquationModel and the Variables(s) used in the mathematical expression."@en ;
  schema:domainIncludes scal:EquationModel ;
  schema:rangeIncludes scal:Variable ;
  schema:rangeIncludes om:Quantity ;
  rdfs:isDefinedBy scal: .

scal:hasEquation a owl:ObjectProperty ;
  rdfs:label "has equation"@en ;
  rdfs:comment "Relation between an EquationModel and its Equations(s)."@en ;
  schema:domainIncludes scal:EquationModel ;
  schema:rangeIncludes scal:Equation ;
  rdfs:isDefinedBy scal: .

scal:hasMathMLDefinition a owl:ObjectProperty ;
  rdfs:label "has MathML definition"@en ;
  rdfs:comment "Relation between an Equation and its MathML-representation string."@en ;
  schema:domainIncludes scal:Equation ;
  schema:rangeIncludes xsd:string ;
  rdfs:isDefinedBy scal: .

scal:hasUncertainty a owl:ObjectProperty ;
  rdfs:label "has uncertainty value"@en ;
  rdfs:comment "Relation between a Measure and the assigned Uncertainty."@en ;
  schema:domainIncludes om:Measure ;
  #schema:rangeIncludes si:Uncertainty ;
  rdfs:isDefinedBy scal: .
